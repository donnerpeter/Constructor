package cons2

/**
 * @author peter
 */
class AnticipatingConstruct extends Aspect {
  final Map<String, String> mockHeadNicks
  final Map<String, Object> realHeadPattern

  AnticipatingConstruct(Map<String, String> mockHeadNicks, Map<String, Object> realHeadPattern) {
    super("syn", mockHeadNicks['syn'])
    this.mockHeadNicks = mockHeadNicks
    this.realHeadPattern = realHeadPattern
  }

  void contextChanged(Frame host) {
    host.findAround(realHeadPattern) { goal ->
      host.removeAlternative(this)
      host.chart.merge(host, goal)
      goal.chosenAs mockHeadNicks
    }
  }

}
