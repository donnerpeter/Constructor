package cons3

/**
 * @author peter
 */
class Update {
  FLinkedMap<Construction, Map> map

  Update(Map<Construction, Map> map) {
    this.map = map instanceof FLinkedMap ? map : FLinkedMap.fromMap(map)
  }

  Update plus(Map constructions) {
    return new Update(map + constructions)
  }

  Update addCxt(Map newArgs, Construction name) {
    return new Update(map.putValue(name, newArgs))
  }

  ParsingState apply(ParsingState state) {
    return state.apply(map.reverse())
  }
}
