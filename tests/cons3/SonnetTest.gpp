package cons3

import junit.framework.TestCase

/**
 * @author peter
 */
class SonnetTest extends TestCase {

  public void testParse1() throws Exception {
    doParseTest("Удивительный случай случился со мной: я вдруг забыл, что идет раньше - 7 или 8", """
A.property:=AMAZING
A.type:=THING
B.type:=HAPPEN
this.time==PAST
B.theme:=A
C.type==ME
B.experiencer:=C
this.elaboration:=#2
--
A.type==ME
B.manner:=SUDDENLY
B.experiencer:=A
B.type:=FORGET
this.time==PAST
B.theme:=#3
--
this.questioned:=A
B.type==COME_SCALARLY
this.time==PRESENT
B.theme==A
B.order==EARLIER
A.variant==7
A.variant==8
""")
  }

  private void doParseTest(String input, String expected) {
    assertEquals expected.trim(), new Parser().parse(input).presentable()
  }

  public void testParse2() throws Exception {
    doParseTest "Я отправился к соседям и спросил их, что они думают по этому поводу", """
A.type==ME
B.type:=GO_OFF
this.time==PAST
B.agent:=A
C.type==NEIGHBOURS
B.goal:=C
D.type:=ASK
D.agent:=A
E.type==THEY
D.addressee:=E
D.question:=#2
--
this.questioned:=A
B.type==THEY
C.type==THINK
this.time==PRESENT
C.experiencer==B
C.opinion==A
D.determiner==THIS
C.topic==D
D.type==MATTER
"""
  }

  public void testTranslate1() throws Exception {
    String input = "Удивительный случай случился со мной: я вдруг забыл, что идет раньше - 7 или 8"
    String expected = "An amazing thing happened to me today, I suddenly forgot what comes first - 7 or 8"
    assertEquals expected, new EnglishGenerator().generate(new Parser().parse(input))
  }
}
